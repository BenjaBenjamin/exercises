const form=document.querySelector("form");function get(){fetch("https://frontendautumn2019-883b.restdb.io/rest/superheroes",{method:"get",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5d887444fd86cb75861e25ef","cache-control":"no-cache"}}).then(e=>e.json()).then(e=>{e.forEach(addNewHero)})}function addNewHero(e){const t=document.querySelector("template").content.cloneNode(!0);t.querySelector("article.hero").dataset.heroid=e._id,t.querySelector("h1").textContent=e.name,t.querySelector("h2").textContent=e.realname,t.querySelector("ul").textContent=e.Powers,t.querySelector(".delete").addEventListener("click",()=>{deleteIt(e._id)}),document.querySelector("#app").prepend(t)}function post(){let e="";form.elements.power.forEach(t=>{t.checked&&(e+=t.value+", ")});const t={name:form.elements.name.value,realname:form.elements.realname.value,Powers:e},o=JSON.stringify(t);fetch("https://frontendautumn2019-883b.restdb.io/rest/superheroes",{method:"post",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5d887444fd86cb75861e25ef","cache-control":"no-cache"},body:o}).then(e=>e.json()).then(e=>{addNewHero(e)})}function deleteIt(e){fetch("https://frontendautumn2019-883b.restdb.io/rest/superheroes/"+e,{method:"delete",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5d887444fd86cb75861e25ef","cache-control":"no-cache"}}).then(e=>e.json()).then(t=>{document.querySelector(`.hero[data-heroid="${e}"]`).remove()})}form.setAttribute("novalidate",!0),form.elements.name.addEventListener("focus",e={}),form.addEventListener("submit",e=>{e.preventDefault(),post()}),get(),document.querySelector(".add").addEventListener("click",post);
